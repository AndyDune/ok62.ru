<?php

class Module_Display_Catalogue_Object_ListInAdressGM extends Dune_Include_Abstract_Code
{

    protected function code()
    {
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////        
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////        
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////        


$list = new Special_Vtor_Object_List();

if ($this->no_ryazan)   
    $list->setNoRyazan();

//    $this->adress_object->setStreet(0);
//    $this->adress_object->setHouse(0);
//    $this->adress_object->setGroup(0);
//    $this->adress_object->setBuilding(0);
//    $this->adress_object->setDistrict(0);
    
$list->setAdress($this->adress_object);
$list->setActivity(1);
if ($this->type)
    $list->setType($this->type);

//    $objects_list_run = $list->getListCumulate($page_curent * $page_per, $page_per);    
    $objects_list_run = $list->getListCumulateGroupInHouse(0, 1000);    
    
$module = new Module_Display_Catalogue_Object_prepareForGM();    
$module->objects_list = $objects_list_run;
$module->make();
$data = $module->getResult('data');




$this->setResult('data', $data);




/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////        
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////        
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////        
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////        
    }
    
}
    
    